extends ./chrome.jade

block content
  style.
    * {
      box-sizing: border-box;
    }

    body, html {
      width: 100%;
      height: 100%;
      margin: 0;
      background-color: #F5F5F5;
    }
    .kibanaWelcomeView {
      background-color: #F5F5F5;
    }

    .kibanaWelcomeText {
      color: #222;
      font-size: 14px;
      font-family: Sans-serif;
      margin-top: 20px;
      color: #666;
      animation: fadeIn 1s ease-in-out;
      animation-fill-mode: forwards;
      opacity: 0;
      animation-delay: 1.0s;
    }

    .kibanaLoaderWrap {
      height: 128px;
      width: 128px;
      position: relative;
      margin-top: 40px;
    }

    .kibanaLoader {
      height: 128px;
      width: 128px;
      margin: 0 auto;
      position: relative;
      border: 2px solid transparent;
      border-top: 2px solid #00A69B;
      border-radius: 100%;
      display: block;
      opacity: 0;
      animation: rotation .75s .5s infinite linear, fadeIn 1s .5s ease-in-out forwards;
    }

    .kibanaWelcomeLogoCircle {
    }

    .kibanaWelcomeLogo {
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAABXCAMAAABCzzsmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABqlBMVEX29vb////y1L/vupXwvpvz2snyzbTqiETrk1bz2MXyz7b04NLuq3z16+Pwvpzy0rvxxqjz2cf049juqnvwvJj05NnrkVPsnWf29PP17ejvuZPwwaH28+716dP27+P039L10pTzrzPzrzL0yHf28en105f0xGv29vXzsjr15cf27d713K3xzbPtpHH29PH148Pwv5300Iz0v16npaWNi4u0s7P0zYP0wmX27dxXVFUjHyDOzs727d3148H16dKMiov28uP357T37tHBwMA9OTr379f6yzP6yCb35q/44Zb51V/p6ekwLC1/fX335ar42ndkYmL43YP6yzb51mf28eAvLC09Ojv04dTz28r06OD17+vc29vCwcGamJmnpqby077snWbsllrz3s/vsYfrj0/vuJJYVVZLR0hycHHvuJFyb3DrlVrrjk7usYaZmJjsnGVKR0fto3C1s7TrkFGdn6HY2dqAgoXr7OyjpafBwcPn5+ilpqi7vL2en6GztLbKysvg4OHv7+/Z2dqOkJPCw8SWl5qPkZOsra+HiYzR0tOWmJrDxMWsrrDKy8yYoSseAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+IDCQcRMjOxQWYAAAXySURBVHja7dr9exo1HADw6/R6m684fH9ffVeqKFTlUFFBq0IVXyhvdW037MprizuYFsZL6Ql18382udcEchRKniXsIT+USy6BfLjv5ZJQQbiv0tIS6x4sQAvQfKcFyCFdeOBBkbWFImhZguniJdYaWqCHJCM9zJpDCWR6pEdYc+iALlkg6VHWHiqgx2zQ46w9VEAuG/QEaw8V0GUbxJpDaVBwm54nWXMogZ56Wvc88yxrDq0H63PPQ88LrDFUQC++9LL2+spl1hQ6oFevrKy89jprBT3QGyswvclaQQ301tsaaOUd1gxaoHd1z8p7kzbwrK56eAa9f0UHfTBpA68keXkGCR9qno8mrm+DfH5iWmMMEj4Gnk8+PQcoIBNTkDVI+OzzL6aofRYoNKtnJtCXX309bRMbFAwPp4gsR2b2zAL65tv19e/ODRpJPnCBwkxB36+vr/9ADRSNyfLG7J5ZQD8C0E/UQHEQcFG2IOHnX379jRZojU7A3fOdUycQrYDjBgQCLkEj4HgBhUHAzTxH4AgU3ZTlOKVP4AK0QS3gzgAlUxdSaSuXBrnk+HdLprzLqcxIcTq1nEo5g8gBl9363b9FnNoFt/xXt6YC6auW7R19v1pHeHa13O6yXc3tdl+zGoBa26v65s/1NPZuXr1l7o80GUQMON+mPrmL+e1Lt7G3B4BrN/Qz+9nJQdrHes3NtpwoCJkday/xulXtoiRdsxqIQt6qkkMWcclduzhJBBECLrpnz1dj1uMpAB9VBcKJiUAuqZgXRdFbBB1JA0+pvC2KLpCT8mRQWZLKLlDFrXfd9ORAtpj3iJ5yCRQTQDDgKkMeeBEihVCoEEGXFBBUkBMFXzhciUMRKSCdQKtSWb8XMgcg45YOjDAC3ZbMiMJAq1aVZAnkjCoZ6DEImbK0QwAdynJgtCjhM7gJ0PGsBbohH0btE3tTgKSieW9nYLSUTESmZHcJA9kNBBHkkrbfjr+ylBsBhUDnh+6GCiiyvvws6HjBAlkefbJEuESOILQbSJjBO6VKBCH3TdHsdlrCAQfSMChICLgYNq2Dy4qsBfLZJyIjLceC8Jw9XG9L0g4RhLTPm90G30URfWPPCIgQcL6hooTZcQBKIOUF4gLXCVS1cyLWWySHgaqk9gfD/S8NFYSsr99Ocew6aB2Pm6AA3nYKUBkjFLEcEZRH2nsMELz98B/7qzgoSNpGAFfk6haS9sGwYILQytOBkI8Vna4XBkL7abbAry2hIuji4fCHZ0mbJ3MCqpAGqvD8grIxUpcgaGRHaD5ApIDTQQIxsQclQV187u1GKlbIT0Z4D5HXEuxBwsgohwzbWadthIjTdgkHoCo2/uuNzYqO+1bxYWjczw0IPJByaMy5bZDzvhU4E4vi+c0oJyA4q0P+oQnOfIyK4/atItipYAyZKTAHieiK0AMWVWbFcRulcJzzox5j/ccDSFvG7i7DsIMLdJdZcY3865AxVYPj396f8Ci7L9uhyQXIXslLcIAwKsKAGwPSlgxgNacvxM213j0A3bx5NkgQi6bHa1UsyONBQtj+PSxgPavOD6KctvPVatXtSk/VKFiJBwKBeGja3ygX/+bMe1qAeE+sQEqNVFqvndnw1q37DPTX30LdSMTKLEBHRwio0RwFHd12hgEQSE3F6TwLULOJgFptAqjRmV8QliYLOU5B3ePjrlUEMqOgznEHPcktSOn1FEE5URX1H3gzAV29rSq9210d1Fe78LWm9BVlAG+wk4GiqC1TwCFIv0I90P9G3wDB7iknGqjf12G1Osh36kdCbdARhNMB9yD43Z8qBqhmlNZP/9UGPQ0ED8Ct1mjBgwb3oFNwUBsBDfqCCVINkHqKCbgF1Yigk17bBCkGSJlrUK2r3hkC9bWL1ptXkNBV7+Kgo3pb6N7lGtQGYdXqgINOS58pKB2jFB50G2342tHGAlito9YHrWYfA7VbPIHOk5rNCSvyDzptwL9Ke8Lq/IO66u3/7jTU7oTV+QcJ3ZNmc9LrMxeg6dICxHtagHhPS0v/A7elCzLspS1OAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTAzLTA5VDA3OjE3OjUwLTA3OjAw4FjmmQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wMy0wOVQwNzoxNzo1MC0wNzowMJEFXiUAAAAASUVORK5CYII=");
      background-repeat: no-repeat;
      background-size: contain;
      width: 150px;
      height: 150px;
      margin: 0px 0px 0px 0px;
    }

    @keyframes rotation {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(359deg);
      }
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: scale(.1);
      }
      80% {
        opacity: .5;
        transform: scale(1.2);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }


  .kibanaWelcomeView
    .kibanaLoaderWrap
      .kibanaLoader
      .kibanaWelcomeLogoCircle
        .kibanaWelcomeLogo
    .kibanaWelcomeText

  script.
    window.onload = function () {
      var buildNum = #{kibanaPayload.buildNum};
      var cacheParam = buildNum ? '?v=' + buildNum : '';
      function bundleFile(filename) {
        var anchor = document.createElement('a');
        anchor.setAttribute('href', !{JSON.stringify(bundlePath)} + '/' + filename + cacheParam);
        return anchor.href;
      }
      var files = [
        bundleFile('vendors.style.css'),
        bundleFile('commons.style.css'),
        bundleFile('#{app.getId()}.style.css'),

        bundleFile('vendors.bundle.js'),
        bundleFile('commons.bundle.js'),
        bundleFile('#{app.getId()}.bundle.js')
      ];

      (function next() {
        var file = files.shift();
        if (!file) return;

        var failure = function () {
          // make subsequent calls to failure() noop
          failure = function () {};

          var err = document.createElement('h1');
          err.style['color'] = 'white';
          err.style['font-family'] = 'monospace';
          err.style['text-align'] = 'center';
          err.style['background'] = '#F44336';
          err.style['padding'] = '25px';
          err.innerText = '#{i18n('UI-WELCOME_ERROR')}';

          document.body.innerHTML = err.outerHTML;
        }

        var type = /\.js(\?.+)?$/.test(file) ? 'script' : 'link';
        var dom = document.createElement(type);
        dom.setAttribute('async', '');
        dom.addEventListener('error', failure);

        if (type === 'script') {
          dom.setAttribute('src', file);
          dom.addEventListener('load', next);
          document.head.appendChild(dom);
        } else {
          dom.setAttribute('rel', 'stylesheet');
          dom.setAttribute('href', file);
          document.head.appendChild(dom);
          next();
        }
      }());
    };
